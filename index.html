<!DOCTYPE html>
<head>
  <script cross-site-cookie=whatever; SameSite=None; src="js/scriptBasic.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<html>
<link rel="stylesheet" href="css/Dashboard.css">
<body onload="reloadPage()">
  <main>
    <hgroup align=center>
      <h2 >Dashboard</h2>
    </hgroup>
    <did clas="main">
      <input type="range" min="2008" max="2020" value="2018" step="1" style="width:42%;">
    </did>
    <section>
      <div class="View 1" style="overflow-y: hidden; border: 2px solid black; width: 800px; height: 600px; ">
        <div style="width: 800px; height: 600px">
          <iframe scrolling="no" id="map" style='overflow-y:hidden; width:100%; height:600px' src="Dashboard/map.html" frameborder="0" width="100%" height="600px" type="text/html"> </iframe>
        </div>
      </div>
      <div class="View 1" style="overflow-y: hidden; border: 2px solid black; width: 270px; height: 600px; ">
        <div style="width: 270px; height: 600px">
          <input type="checkbox" id="checkbox1" name="checkbox1" value="Map colors" onclick="mapColorsClicked()">
          <label for="checkbox1"> Percentage of popolation working in IT</label><br>
          <input type="checkbox" id="checkbox2" name="checkbox2" value="Hubs squares" onclick="hubsClicked()">
          <label for="checkbox2"> Hubs</label><br>
          <!---<iframe scrolling="no" style='overflow-y:hidden; width:100%; height:600px' src="Dashboard/map.html" frameborder="0" width="100%" height="600px" type="text/html"> </iframe>--->
        </div>
      </div>
    </div>
    <div class="View 1" style="overflow-y: hidden; border: 2px solid black; width: 800px; height: 600px; ">
      <div style="width: 800px; height: 600px">
        <iframe scrolling="no" style='overflow-y:hidden; width:100%; height:600px' src="Dashboard/barchart.html" frameborder="0" width="100%" height="600px" type="text/html"> </iframe>
      </div>
    </section>
  </main>
</body>
<footer><small>Copyright 2022 Joao Lopes, Tiago Fonseca and David Huber</small></footer>

<script>

  function mapColorsClicked(){
    var check_box = document.getElementById("checkbox1");
    if (check_box.checked){

      sessionStorage.setItem("mapColors", "true");
      reload_map();

    } else {

      sessionStorage.setItem("mapColors", "false");
      reload_map();
    }
  }

  function hubsClicked(){
    var check_box = document.getElementById("checkbox2");
    if (check_box.checked){

      sessionStorage.setItem("hubs", "true");
      reload_map();

    } else {

      sessionStorage.setItem("hubs", "false");
      reload_map();
    }
  }

  function readFromFile(){
    var fr = new FileReader();
    fr.onload=function(){
        document.getElementById('output')
                .textContent=fr.result;
    }

    var txt = fr.readAsText("usr_data.txt");
    console.log(txt);
  }

  function reload_map(){
    var map = document.getElementById("map");
    map.src = map.src;
  }

  function reloadPage(){
    document.getElementById("checkbox1").checked = "on";
    document.getElementById("checkbox2").checked = "on";
    sessionStorage.setItem("mapColors", "true");
    sessionStorage.setItem("hubs", "true");
    reload_map();
  }

</script>
</html>
